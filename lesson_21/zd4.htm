<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>4_Завдання</title>
    <style>
      .boxDecisionDz form {
        border: 2px black solid;
        padding: 10px;
      }
      .boxDecisionDz :not(:last-child) {
        margin-bottom: 10px;
      }
      .month {
        max-width: 250px;
        min-height: 30px;
        border-radius: 5px;
      }
      .score {
        max-width: 250px;
        min-height: 30px;
        border-radius: 5px;
      }
      .button {
        padding: 5px;
        min-height: 30px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <header class="header"></header>
      <main class="main">
        <!-- ============================ Завданя============================================ -->
        <div class="txt">
          <a href="index.html" class="link"
            >Завдання_4 (Link_поернення на головну)</a
          >
          <div class="nameLesson">
            Користувач задає місяць навчання учня (перевіряти чи є числом, чи
            від 1 до 12, чи не канікули) та оцінку (перевіряти чи є числом, чи
            від 1 до 100). Вивести чи зможе він виправити оцінку (якщо оцінка
            погана і це не останній місяць у семестрі) . Обробку усіх помилок
            зробити з використанням відповідних класів.
          </div>
        </div>

        <!-- ================================ HTML ======================================== -->
        <div class="boxDecisionDz">
          <form action="#">
            Місяць навчання:
            <input id="month" type="text" class="month" /><br />
            Оцінка учня: <input id="score" type="text" class="score" /><br />
            <input type="submit" value="Надіслати" class="button" />
          </form>
          <div class="screenResult"></div>
        </div>
        <!-- ================================ Script ======================================== -->
        <script>
          class IsNotNumberError extends Error {
            constructor() {
              super();
              this.message = "Має бути числом";
              this.name = "IsNotNumberError";
            }
          }
          class IsNegativeNumberError extends Error {
            constructor() {
              super();
              this.message = "Число має бути додатним";
              this.name = "IsNegativeNumberError";
            }
          }
          class IsNotacAdemicMonthError extends Error {
            constructor() {
              super();
              this.message = "Не є навчальним місяцем";
              this.name = "IsNotacAdemicMonthError";
            }
          }

          class IsEmptyFieldError extends Error {
            constructor() {
              super();
              this.message = "Поля має бути заповниними";
              this.name = "IsEmptyFieldError";
            }
          }
          class IsToHightNumberError extends Error {
            constructor() {
              super();
              this.message = "Значення має бути від 1 до 12";
              this.name = "IsToHightNumberError";
            }
          }
          function test(monthInput, scoreInput, timeout = 5000) {
            // Маю таке питання, хотів трошки по іншому зробити так:
            // if(monthInput !== 12 || monthInput !== 5) То воно ігнорувало
            // я писав 12 а код спрацовував, наче то не 12 ... я так і не зрозумів чого??
            if (monthInput === 12 || monthInput === 5){
              if(scoreInput < 5)
              document.querySelector(".screenResult").innerText = "Нажаль вже немає можливості перездати оцінку";
            }
            else
              document.querySelector(".screenResult").innerText = 
            'У вас все ок!Але якщо хочете перездати на кращю оцінку, дочекайтесь наступного семестра'
            
            setTimeout(() => {
              document.querySelector(".screenResult").innerText = "";
              document.forms[0].elements[0].value = "";
              document.forms[0].elements[1].value = "";
            }, timeout);
            console.log(typeof monthInput);
          }
          function validate() {
            try {
              let monthInput = parseInt(document.forms[0].elements[0].value);
              let scoreInput = parseInt(document.forms[0].elements[1].value);
              if (monthInput === "" || scoreInput === "")
                throw new IsEmptyFieldError();
              if (isNaN(monthInput) && isNaN(scoreInput))
                throw new IsNotNumberError();
              if (monthInput < 0 || scoreInput < 0)
                throw new IsNegativeNumberError();
              if (monthInput >= 6 && monthInput <= 8)
                throw new IsNotacAdemicMonthError();
              if (monthInput > 12 || scoreInput > 12)
                throw new IsToHightNumberError();
              test(monthInput, scoreInput);
            } catch (err) {
              if (err instanceof IsEmptyFieldError) {
                alert(err.message);
                document.forms[0].elements[0].value = "";
                document.forms[0].elements[1].value = "";
              } else if (err instanceof IsNotNumberError) {
                alert(err.message + "Перепищіть цифрами");
                document.forms[0].elements[0].value = "";
                document.forms[0].elements[1].value = "";
              } else if (err instanceof IsNegativeNumberError) {
                alert(err.message);
                document.forms[0].elements[0].value = "";
                document.forms[0].elements[1].value = "";
              } else if (err instanceof IsNotacAdemicMonthError) {
                alert(
                  err.message +
                    "Навчальний рік з 9го місяця і по 12, та з 1го по 5й місяць"
                );
                document.forms[0].elements[0].value = "";
                document.forms[0].elements[1].value = "";
              } else if (err instanceof IsToHightNumberError) {
                alert(err.message);
                document.forms[0].elements[0].value = "";
                document.forms[0].elements[1].value = "";
              }
            }
          }
          window.onload = () => {
            let test = (document.forms[0].onsubmit = validate);
            console.log(test);
          };
        </script>
      </main>
      <footer class="footer"></footer>
    </div>
  </body>
</html>
